# 图片分类应用

这是一个基于深度学习和图像特征分析的图片分类应用，可以将上传的图片分类为"人"、"动物"或"植物"三种标签。

## 功能特点

- **双重分类机制**：
  - 主要使用Clarifai API（基于MobileNet V2等深度学习模型）进行图像识别
  - 备用本地特征分析系统，在API不可用时自动切换
- **用户友好界面**：
  - 简洁的Web界面，支持图片上传和结果展示
  - 显示分类结果和置信度
- **高准确率**：
  - 利用预训练深度学习模型进行分类
  - 多种图像特征综合分析
  - 智能规则系统提高准确率

## 安装步骤

1. 克隆此仓库：
   ```
   git clone <仓库地址>
   cd 图片分类应用
   ```

2. 创建虚拟环境（推荐）：
   ```
   python -m venv venv
   source venv/bin/activate  # Linux/Mac
   # 或
   venv\Scripts\activate  # Windows
   ```

3. 安装依赖项：
   ```
   pip install -r requirements.txt
   ```

4. 配置环境变量：
   - 复制`.env.example`文件并重命名为`.env`：
     ```bash
     cp .env.example .env
     ```
   - 在`.env`文件中填入您的Clarifai API密钥：
     ```
     CLARIFAI_API_KEY=your_api_key_here
     ```
   - 您可以在[Clarifai官网](https://clarifai.com/)注册账户并获取API密钥

## 使用方法

1. 启动应用：
   ```
   python app.py
   ```

2. 在浏览器中访问：
   ```
   http://localhost:8080
   ```

3. 上传图片并查看分类结果：
   - 点击"选择文件"按钮，选择一张图片
   - 点击"上传并分类"按钮
   - 查看分类结果和置信度

## 技术细节

### 1. 分类系统

本应用采用双重分类机制：

#### 主要方法：Clarifai API

- 使用Clarifai的通用图像识别API（基于MobileNet V2等深度学习模型）
- 将API返回的概念映射到"人"、"动物"、"植物"三个类别
- 通过关键词匹配和置信度累加进行分类

#### 备用方法：本地特征分析

当API不可用时，自动切换到本地特征分析：

- **颜色特征**：平均RGB值、颜色标准差、肤色区域比例、绿色区域比例
- **纹理特征**：边缘检测、梯度分析
- **智能规则**：基于领域知识的启发式规则

### 2. Web应用框架

- 使用Flask框架构建Web应用
- 支持图片上传、处理和结果展示
- 响应式设计，适配不同设备

## 文件结构

- `app.py`：Flask应用主文件
- `model.py`：图像分类模型实现
- `templates/`：HTML模板文件
  - `index.html`：上传页面
  - `result.html`：结果显示页面
- `uploads/`：存储上传的图片
- `requirements.txt`：项目依赖项
- `README.md`：项目说明文档

## 注意事项

1. **API限制**：
   - Clarifai免费账户有API调用次数限制
   - 超过限制后会自动切换到本地特征分析

2. **API密钥安全**：
   - 不要将API密钥提交到公共代码库
   - 在生产环境中，应将API密钥存储在环境变量或配置文件中

3. **最佳实践**：
   - 使用清晰的图片获得最佳结果
   - 确保图片中的主体明显
   - 对于人物照片，尽量包含面部
   - 对于动物照片，尽量选择特征明显的动物
   - 对于植物照片，尽量选择绿色植物

## 未来改进

1. 增加更多分类类别
2. 实现用户反馈机制，收集错误分类案例
3. 添加图片预处理功能，提高分类准确率
4. 实现批量处理功能，允许一次上传多张图片
5. 优化移动端体验

## 许可证

[MIT许可证](LICENSE) 